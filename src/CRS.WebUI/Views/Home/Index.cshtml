@{
    ViewData["Title"] = "Home";
    //   Layout = "~/Views/Shared/_Layout.cshtml";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

<style>
    .popup-container {
        position: absolute;
        background: white;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 15px;
        z-index: 1000;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        min-width: 250px;
    }

    .room {
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
    }

    .counter {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 5px 0;
    }

        .counter button {
            width: 25px;
            height: 25px;
            border: 1px solid #ddd;
            background: #f8f9fa;
            border-radius: 3px;
            cursor: pointer;
        }

            .counter button:hover {
                background: #e9ecef;
            }

    .add-room {
        display: flex;
        align-items: center;
        cursor: pointer;
        color: #007bff;
        margin-top: 10px;
    }

        .add-room:hover {
            text-decoration: underline;
        }

    .popup-footer {
        margin-top: 15px;
        text-align: right;
    }
</style>
<!-- Modal -->
<div class="modal fade" id="roomDetailsModal" tabindex="-1" aria-labelledby="roomDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="roomDetailsModalLabel">Deluxe Double Room with Heating</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <!-- Carousel Slider with Arrows -->
                        <div id="carouselExampleModal" class="carousel slide" data-bs-ride="carousel">
                            <!-- Carousel Indicators -->
                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#carouselExampleModal" data-bs-slide-to="0" class="active"></button>
                                <button type="button" data-bs-target="#carouselExampleModal" data-bs-slide-to="1"></button>
                                <button type="button" data-bs-target="#carouselExampleModal" data-bs-slide-to="2"></button>
                            </div>

                            <!-- Carousel Items -->
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="~/images/img2.webp" class="d-block w-100" alt="Room Image 1">
                                </div>
                                <div class="carousel-item">
                                    <img src="~/images/img1.webp" class="d-block w-100" alt="Room Image 2">
                                </div>
                                <div class="carousel-item">
                                    <img src="~/images/img1.webp" class="d-block w-100" alt="Room Image 3">
                                </div>
                            </div>

                            <!-- Carousel Controls (Arrows) -->
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleModal" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleModal" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <!-- Room Details -->
                        <p><strong>Price:</strong> <span class="text-success txtdiscount">35% OFF</span> <del class="txtactualprice">$634</del> <span class="fs-4 txtofferedprice">$412</span></p>
                        <p><strong>Guest: </strong><i class="bi bi-person-fill"></i>  x 1 Guest</p>
                        <p><strong>Plan Name:</strong> <span class="txtplanname">Bed in 4 Bed Mixed Dormitory with Heating</span></p>
                        <p><span class="txtremarks">Bed in 4 Bed Mixed Dormitory with Heating</span></p>
                        <div class="">
                            <ul class="list-none grid grid-cols-2 gap-2 mt-3">
                                <li class="flex gap-2 items-center">
                                    <img alt="Tea/Coffee maker" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/image-1738225433496.svg" style="color: transparent;" title="Tea/Coffee maker" width="20">
                                    <div class="text-black text-xs md:text-lg">Tea/Coffee maker</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Double bed" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Double%20bed-1682510341981.svg" style="color: transparent;" title="Double bed" width="20">
                                    <div class="text-black text-xs md:text-lg">Double bed</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Bedside lamp" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Bedside%20lamp-1682510090251.svg" style="color: transparent;" title="Bedside lamp" width="20">
                                    <div class="text-black text-xs md:text-lg">Bedside lamp</div>
                                </li>

                                <li class="flex gap-2 items-center">
                                    <img alt="Washroom" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Washroom-1682511196310.svg"
                                         style="color: transparent;" title="Washroom" width="20">
                                    <div class="text-black text-xs md:text-lg">Washroom</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Linen" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Linen-1682510733500.svg" style="color: transparent;" title="Linen" width="20">
                                    <div class="text-black text-xs md:text-lg">Linen</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Charging point" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Charging%20point-1682510251029.svg" style="color: transparent;" title="Charging point" width="20">
                                    <div class="text-black text-xs md:text-lg">Charging point</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Pillow" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Pillows-1682510921429.svg"
                                         style="color: transparent;" title="Pillow" width="20">
                                    <div class="text-black text-xs md:text-lg">Pillow</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Blanket" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Blanket-1682510144012.svg"
                                         style="color: transparent;" title="Blanket" width="20">
                                    <div class="text-black text-xs md:text-lg">Blanket</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Towel" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/TOWEL-1682511119678.svg" style="color: transparent;" title="Towel" width="20">
                                    <div class="text-black text-xs md:text-lg">Towel</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Wi-Fi" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Wifi-1682511242681.svg" style="color: transparent;" title="Wi-Fi" width="20">
                                    <div class="text-black text-xs md:text-lg">Wi-Fi</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Daily housekeeping" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Housekeeping-1682510596003.svg" style="color: transparent;" title="Daily housekeeping" width="20">
                                    <div class="text-black text-xs md:text-lg">Daily housekeeping</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Air conditioner" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Air%20conditioner-1682509941937.svg" style="color: transparent;" title="Air conditioner" width="20">
                                    <div class="text-black text-xs md:text-lg">Air conditioner</div>
                                </li>
                                <li class="flex gap-2 items-center">
                                    <img alt="Wardrobe" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/closet-1682567764031.svg"
                                         style="color: transparent;" title="Wardrobe" width="20">
                                    <div class="text-black text-xs md:text-lg">Wardrobe</div>
                                </li>

                                <li class="flex gap-2 items-center">
                                    <img alt="Toiletries" class="mx-1 lg:w-5 lg:h-5 w-4 h-4" data-nimg="1" height="20" src="img/Toiletries-1682511108833.svg" style="color: transparent;" title="Toiletries" width="20">
                                    <div class="text-black text-xs md:text-lg">Toiletries</div>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="container py-4">
    <!-- Availability Section -->
    <div class="mb-4 col-md-12 m-auto text-center">
        <h3 class="maintitle">We Have A Passion For Hotels</h3>
    </div>

    <div class="searhCrs">

        <div class="booking-containerCrs">
            <div class="booking-field">
                <i class="icon1 fa-solid fa-magnifying-glass"></i>
                <input type="text" placeholder="Search location" value="St. Charles Hotel, Hudson NY" readonly>
            </div>
            <!-- Date selector -->
            <div class="booking-field booking-fieldDateSelector">
                <i class="icon1 fas fa-calendar-days"></i>
                <input id="dateRangePicker" type="text" placeholder="Select date ">
            </div>
            <!-- Room selector -->
            <div class="booking-field">
                <i class="icon2 fa-solid fa-bed-pulse"></i>
                <button onclick="togglePopup()" class="person_filled_button" id="roomSummary">1 Room</button>
            </div>

            <!-- Guest selector -->
            <div class="booking-field">
                <i class="icon2 fa-solid fa-people-group"></i>
                <button onclick="togglePopup()" class="person_filled_button" id="selectionSummary">1 Adult, 0 Child</button>

                <div id="popup" class="popup-container" style="display: none;">
                    <div class="header">
                        <span>Accommodation & Pax</span>
                        <button class="close-btn" onclick="togglePopup()">Close</button>
                    </div>


                    <div id="rooms">
                        <div class="room" data-room-id="1">
                            <span>Room 1</span>
                            <div class="counter">
                                <span class="userPerson">Adults</span>
                                <button onclick="updateCounter(this, 1, 'adults', -1)">−</button>
                                <span class="adults">1</span>
                                <button onclick="updateCounter(this, 1, 'adults', 1)">+</button>
                            </div>
                            <div class="counter">
                                <span class="userPerson">Children</span>
                                <button onclick="updateCounter(this, 1, 'children', -1)">−</button>
                                <span class="children">0</span>
                                <button onclick="updateCounter(this, 1, 'children', 1)">+</button>
                            </div>
                        </div>
                    </div>



                    <div class="add-room" onclick="addRoom()">
                        <button>+</button> Add Room
                    </div>
                    @* <div class="popup-footer">
                        <button class="btn btn-primary" onclick="applyGuestSelection()">Apply</button>
                    </div> *@
                </div>

            </div>

             <div class="d-flex gap-2">
                <button id="bookNowButton" class="book-now">BOOK NOW</button>
                <button id="clearSelection" class="book-now">CLEAR</button>
            </div>
        </div>
    </div>

    <div class="crsContainer" style="display: none;">
        <div class="row g-3">
            <div class="col-md-8">
                <div id="div_RoomTypeGridPartialView">
                    @* @Html.Partial("_index/_roomTypeGridView") *@
                </div>
            </div>

            <div class="col-md-4 col-md-4 bg-light rounded p-4">

                <div id="div_SummaryPartialView1">
                    @* @Html.Partial("_index/_summary1") *@
                </div>
                <div id="div_SummaryPartialView2">
                    @* @Html.Partial("_index/_summary") *@
                </div>                

                @*<div class="containerStay">*@

                <div id="div_PackagesPartialView">
                    @Html.Partial("_index/_packages")
                </div>
                @*</div>*@
            </div>
        </div>
    </div>

    <!-- Why You'll Love It Here -->
    @Html.Partial("_index/_whyLoveIt")
    <!-- Location -->
    @Html.Partial("_index/_location")


    @Html.Partial("_index/_faqs")

</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="~/customjs/roomtype/roomtype.js"></script>
<script src="~/customjs/index.js"></script>
<script src="~/customjs/roomtype/availabilitycalender.js"></script>
<script src="~/customjs/guestroomselector.js"></script>
@* <script src="~/customjs/IndexRoomBooking.js"></script> *@
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script type="text/javascript">

    function PackagesPartialView() {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: '/Home/PackagesPartialView',
            //data: JSON.stringify(inputDTO),
            cache: false,
            dataType: "html",
            success: function (data, textStatus, jqXHR) {
                $('#div_PackagesPartialView').html(data);
            },
            error: function (result) {
                $erroralert("Transaction Failed!", result.responseText);
            }
        });
    }

    let currentDate = new Date();
    currentDate.setDate(currentDate.getDate() + 7);
    let nextDate = new Date(currentDate);
    nextDate.setDate(nextDate.getDate() + 1);

    $(document).ready(function () {
        //RoomTypeGridPartialView(currentDate.toISOString().split('T')[0], nextDate.toISOString().split('T')[0]);
        PackagesPartialView();
        $("#bookNowButton").on("click", function () {
            const picker = document.getElementById('dateRangePicker')._flatpickr;
            const dates = picker.selectedDates;
            if (dates.length < 2) {
                Swal.fire('Select dates', 'Please select your check-in and check-out dates.', 'warning');
                return;
            }
            const diffDays = (dates[1] - dates[0]) / (1000 * 60 * 60 * 24);
            if (diffDays < 1) {
                Swal.fire('Invalid stay', 'Check-out must be at least one day after check-in.', 'warning');
                return;
            }
            $(".crsContainer").fadeIn(); // Smooth show animation
        });

         $("#clearSelection").on("click", function () {
            clearAllSelections();
        });
    });
</script>
<script>
    function scrollSlider(direction, id) {
        const slider = document.querySelector(".date-slider_" + id);
        const scrollAmount = 150;
        slider.scrollLeft += direction * scrollAmount;
    }
</script>


<script>
    let _currentDate = new Date();
    _currentDate.setDate(_currentDate.getDate() + 1);
    flatpickr("#dateRangePicker", {
        mode: "range",
        dateFormat: "d-M-Y",
        showMonths: 2,
        prevArrow: "<span>&lt;</span>",
        nextArrow: "<span>&gt;</span>",
        defaultDate: [currentDate, nextDate],
        minDate: _currentDate,
        onChange: function (selectedDates) {
            currentDate = selectedDates[0];
            nextDate = selectedDates[1];
            if (selectedDates.length === 2) {
                const diffDays = (selectedDates[1] - selectedDates[0]) / (1000 * 60 * 60 * 24);
                if (diffDays >= 1) {
                    RoomTypeGridPartialView(selectedDates[0], selectedDates[1]);
                }
            }
        }
    });
</script>

<script>
    // function toggleRows(button) {
    //     let rowsContainer = button.closest(".container").querySelector(".rowsContainer");

    //     if (!rowsContainer.classList.contains("expanded")) {
    //         rowsContainer.classList.add("expanded");
    //         button.innerHTML = "&#x25B2;";
    //         button.style.display = "none";
    //     }
    // }


    function toggleRows(button) {
        let rowsContainer = button.closest(".container").querySelector(".rowsContainer");
        let img = button.querySelector("img");

        // Toggle expanded class
        rowsContainer.classList.toggle("expanded");
        button.classList.toggle("expanded");

        if (rowsContainer.classList.contains("expanded")) {
            img.setAttribute("src", "/images/chevron-up.svg"); // Change icon to up
            img.setAttribute("alt", "Collapse");
        } else {
            img.setAttribute("src", "/images/chevron-down.svg"); // Change icon to down
            img.setAttribute("alt", "Expand");
        }
    }




    function toggleRows2(button) {
        // let rowsContainer = button.closest(".container").querySelector(".rowsContainer2");

        // if (!rowsContainer.classList.contains("expanded")) {
        //     rowsContainer.classList.add("expanded");
        //     button.innerHTML = "&#x25B2;";
        //     button.style.display = "none";
        // }
                    let rowsContainer = button.closest(".container").querySelector(".rowsContainer2");
        let img = button.querySelector("img");

        // Toggle expanded class
        rowsContainer.classList.toggle("expanded");
        button.classList.toggle("expanded");

        if (rowsContainer.classList.contains("expanded")) {
            img.setAttribute("src", "/images/chevron-up.svg"); // Change icon to up
            img.setAttribute("alt", "Collapse");
        } else {
            img.setAttribute("src", "/images/chevron-down.svg"); // Change icon to down
            img.setAttribute("alt", "Expand");
        }
    }

</script>



<script>

        document.addEventListener("click", function(event) {
        const popup = document.getElementById("popup");
        const buttons = document.querySelectorAll(".person_filled_button");

        if (!popup.contains(event.target) && ![...buttons].some(btn => btn.contains(event.target))) {
            popup.style.display = "none";
        }
    });




      document.addEventListener("click", function(event) {
        const popup = document.getElementById("popup");
        const buttons = document.querySelectorAll(".person_filled_button");

        if (!popup.contains(event.target) && ![...buttons].some(btn => btn.contains(event.target))) {
            popup.style.display = "none";
        }
    });

</script>





